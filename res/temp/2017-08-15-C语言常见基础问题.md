---
layout : life
title: C语言基础问题
category : C学习
wangyiyun: true
date : 2017-08-15
---

******

    作者:devstone
    时间:2017年8月15日18:02:46
    版本:V 0.0.0
    邮箱:kevinlq@yeah.net

<!-- more -->


## C语言基础知识点

### 1. extern什么意思

extern 用于变量或者函数前，表示该变量或者函数的定义在外部其他文件中，可以提示
编译器遇到该变量或者函数时在其他模块中寻找其定义

- extern 与"C"一起修饰变量或者函数

```C
比如 extern "C"{
	void fun(int value,const char *str);
}
```

上述的声明告诉编译器fun函数名应该按照C语言的规则去翻译函数名而不是C++。

C++编译器在翻译该函数名时会变的非常奇怪(不用编译器不用)，这是因为C++
支持函数的重载，所以想用函数重载后编译后形成的函数名时不一致的。

- extern 单独修饰变量或函数

A.h
```C
int g_Int;
```

B.h
```C
#include "A.h"
extern int g_Int;
```

表示该变量在其他模块中使用，这里只是声明了下，**不是定义!**。编译器在编译过程中，
首先会在A模块中查找是否有该变量，如果找不到，在最后链接阶段会出错！


### 2. char *p; strcpy(p, "abc");能运行吗

```C
char *p; 
strcpy(p, "abc");
```
上述语句可能正常运行，可能会奔溃!

未初始化的指针P所指向的随机地址可能是垃圾值也可能是可写区域，这取决于具体
的编译器分配策略。

- 正常

说明此时p所指向的内存是可写的区域，直接cp没有问题

- 奔溃

说明此时p指向的内存是垃圾值



### 3. calloc()和malloc()

calloc()和malloc()都可以用来分配内存空间，两者的调用形式有所不同。
 
```C
int *p1 = (int *)malloc(size);

int *p2 = calloc(n,size);
n：分配内存变量个数; 
size：每个变量的大小

```

- malloc

malloc在内存的动态存储区分配一块长度未size字节的连续区域。函数返回值为该区域
的首地址。

- calloc

calloc也用于分配内存空间，在内存动态存储区中分配n块长度为size字节的连续区域，
分配完成后将已经分配的内存空间置0；


```C
callloc(m,n)本质上等价于

p = malloc(m*n);
memset(p,0,m*n);

```


摘自网络

```C
int main(int argc, char const *argv[])
{
	/* code */
	unsigned n = 1;
	unsigned size = sizeof(int);

	int *p = (int *)malloc(size);
	printf("%d\n",*p);

	free(p);

	p = (int *)calloc(n,size);
	printf("%d\n", *p);
	free(p);

	system("pause");

	return 0;
}
```

输出结果为:
>8061124
0

每次通过malloc分配的内存空间是变化的，而通过calloc分配内存空间为0



### 4. C中没有标准布尔类型

C语言中没有bool类型(C99之前)，需要使用宏定义或者枚举定义

```C
#define TRUE 1
#define FALSE 0
```

在C99之后，出现了一个_Bool，在头文件#include <stdbool.h>中定义

### 5. 使用printf();输出一个'%'

printf("hello world! %%\n");

![结果](/res/img/blog/C学习/printf.png)


### 6. 强烈建议不用使用gets()

gets()不会告知你缓冲区的大小，因此不能避免缓冲区的溢出。标准库fgets()对其做了很多
优化，推荐使用fgets()替换gets();


### 7. 判断大端模式和小端模式

- 大端模式
低位字节放在高位，高位字节放在低地址

- 小端模式
低位字节放在低地址，高位字节放在高地址；

```C
	union UN{
		int a;
		char b;
	};
	UN u;
	u.a = 1;
	if (u.b == 1)
		printf("Little_endian\n");
	else
		printf("Big_endian!\n");
```

![](/res/img/blog/C学习/endian.png)


### 8. sizeof运算符



### 9. 





---

如果您对本文有任何问题，可以在下方留言，或者Email我 

微信公众号：devstone，扫描二维码直接关注

![](/res/img/blog/qrcode_for_devstone.jpg)


