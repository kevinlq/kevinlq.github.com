---
layout : post
title: Qt一些黑科技
category : Qt学习
wangyiyun: true
date : 2017-09-18
---

******

    作者:鹅卵石
    时间:2017年9月18日21:27:57
    版本:V 0.0.0
    邮箱:kevinlq@yeah.net

<!-- more -->


整理整理Qt中的一些**黑科技**

## 编译黑科技

Qt编译给人的感觉就是"慢".其实是我们误解Qt了，想要编译快点，还是有方法的.

### 1. 使用前置声明

前置声明就是在某个类的头文件中进行声明

B.h
```C++
//进行前置声明类A
class A;

class B{
    public:
        B();
        ~B();

    private:
        A *m_pA;
};
```

b.cpp
```C++
在对应cpp文件中引入头文件
#include "A.h"
...
```

### 2. 引入编译预处理PCH

在工程.pro文件中添加一行
```C++
PRECOMPILED_HEADER = stable.h
```
需要我们新建一个头文件"stable.h".在该头文件中包含一些其他库的头文件
```C++
//Add C includes file here

#if defined __cplusplus
//Add C++ includes file here

//Qt includes
#include <QtCore>
#include <QtGui>
#include <QtSql>
...

//Custom includes
#include "my_class.h"

...

#endif

```

[Qt官网详细说明](http://doc.qt.io/qt-5/qmake-precompiledheaders.html)

### 3. 多线程编译

使用QtCreatorIDE在windows下用Mingw编译时，可以在make和clean参数中添加-r,这样会直接开始编译，不会等待，需要多线程时可以在添加-j4，编译速度立马上去.

![配置](/res/img/blog/Qt学习/build-setting.png)

编译时CPU达到100%(我的笔记本是4核的)
![满负荷编译](/res/img/blog/Qt学习/build-j4.png)


---

如果您对本文有任何问题，可以在下方留言，或者Email我 .微信公众号：devstone，扫描二维码直接关注
<center>
<img src="/res/img/blog/qrcode_for_devstone.jpg" width="25%" height="25%" />
</center>